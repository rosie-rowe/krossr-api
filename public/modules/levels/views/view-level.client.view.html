<div class="hero">
	<section class="viewLevel" data-ng-controller="LevelsController" data-ng-init="findOne();">
		<div data-ng-controller="MainCtrl as ctrl" ng-keydown="ctrl.keydown($event)" ng-keyup="ctrl.keyup($event)" class="gameContainer" tabindex="0">
			<div class="levelInfo">
				<big data-ng-bind="level.name"></big>
				<div class="form-group" data-ng-show="authentication.user._id == level.user._id">
					<a href="/#!/levels/{{level._id}}/edit">
						<button class="btn btn-small">
							Edit
						</button>
					</a>
					<a data-ng-click="remove();">
						<button class="btn btn-small">	
							Delete
						</button>
					</a>
				</div>
			</div>
			<div class="gameContainer-inner" ng-style="{'width': ctrl.getOuterGameWidth(),'padding': ctrl.margin}">

				<div class="top row">
					<div number-grid orientation="vertical" class="top-grid"></div>
				</div>
				
				<div class="bottom row">
					<game>
						<tile ng-repeat="i in ctrl.flatten(level.layout) track by $index" ng-init="tileCtrl.getLayout(level.layout, $index)" editable='true'></tile>
					</game>
					<div number-grid orientation="horizontal" class="left-grid" ng-style="{'padding-top': ctrl.margin}"></div>
				</div>
			</div>

			<div class="theCountdown">
				<div>
					<timer ng-if="!level.timeLimit" ng-hide="showPenalty" interval="1000">
						{{ minutes }}:{{sseconds}}
					</timer>
					<timer ng-if="level.timeLimit" ng-hide="showPenalty" countdown="level.timeRemaining" interval="1000" finish-callback="gameOver()">
						{{ minutes }}:{{sseconds}}
					</timer>
					<div ng-if="showPenalty" class="showPenalty">
						{{ penaltyAmount }} sec
					</div>
				</div>

				<div>
					<em class="text-muted">
						<span data-ng-bind="level.user.username"></span>
						/
						<span data-ng-bind="level.created | date:'mediumDate'"></span>
					</em>
				</div>
			</div>
		</div>
	</section>
</div>