<div class="viewLevel">
    <div class="form-group form-horizontal restrict-width" ng-if="['edit', 'new'].indexOf(mode) > -1">
        <h2>{{ mode }} level</h2>

        <div class="controls">
            <label class="control-label" for="name">Name</label>
            <input type="text" data-ng-model="level.name" id="name" class="form-control" placeholder="Name" required>
        </div>

        <div class="controls">
            <label class="control-label" for="minutes">Time Limit</label>
            <input type='text' ng-pattern="validNumber" data-ng-model="level.decomputedTimeLimit" id="minutes" class="form-control" placeholder="Time Limit (minutes)" required>
        </div>

        <div class="controls" ng-if="mode === 'new'">
            <label class="control-label" for="size">Size</label>
            <select ng-model='ctrl.options.size' ng-change="createNewLevel();">
                <option value="25" selected>5x5</option>
                <option value="100">10x10</option>
                <option value="225">15x15</option>
            </select>
        </div>

        <div>
            <button class="btn" type="button" ng-click="confirmClear()">Clear</button>
        </div>

        <div ng-if="mode === 'edit'">
            <button ng-disabled="error" class="btn" type="button" ng-click="confirmUpdate()">
                <span ng-if="!error">Update</span>
                <span ng-if="error" ng-bind-html="error"></span>
            </button>
        </div>

        <div ng-if="mode === 'new'">
            <button ng-disabled="error" class="btn btn-primary" ng-click="create()">
                <span ng-if="!error">Submit</span>
                <span ng-if="error" data-ng-bind="error"></span>
            </button>
        </div>

        <div data-ng-if="authentication.user._id == level.user._id && mode === 'edit'">
            <a data-ng-click="confirmRemove(level);">
                <button class="btn">  
                    Delete Level
                </button>
            </a>
        </div>
    </div>

    <div ng-keydown="ctrl.keydown($event)" ng-keyup="ctrl.keyup($event)" class="animate-hide gameContainer" tabindex="0" ng-show="gameReady">
        <div class="gameContainer-inner" ng-style="{'padding': ctrl.margin}">
            <div class="top row">
                <div number-grid ng-if="mode === 'view'" ctrl="ctrl" layout="level.layout" orientation="vertical" class="top-grid"></div>
            </div>
            
            <div class="bottom row">
                <game>
                    <tile ng-repeat="i in ctrl.finalLayout.tiles" editable='true'></tile>
                </game>

                <div number-grid ng-if="mode === 'view'" layout="level.layout" ctrl="ctrl" orientation="horizontal" class="left-grid" ng-style="{'padding-top': ctrl.margin}"></div>
            </div>
        </div>
    </div>
</section>